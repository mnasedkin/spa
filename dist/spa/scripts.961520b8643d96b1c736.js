class BlockAnimate{constructor(){this.element=document.getElementById("header"),this.duration=500,this.winZipBlock=document.getElementById("top_box"),this.top_img=this.winZipBlock.querySelector("img"),this.animationBlock=document.getElementById("winzip-animation"),this.bottomBox=document.getElementById("bottom_box"),this.boxFractions=document.getElementsByClassName("polygon__triangle"),this.scrollBox=document.getElementById("scroll"),this.run=document.getElementById("scroll_runner"),this.scrollPosition=this.element.scrollTop,this.scrollHeight=Math.max(this.element.scrollHeight,this.element.scrollHeight,this.element.offsetHeight,this.element.offsetHeight,this.element.clientHeight,this.element.clientHeight),this.clientHeight=this.element.clientHeight,this.blokPos=this.animationBlock.getBoundingClientRect(),this.yStartOfAinmaton=.5*this.clientHeight,this.yEndOfAinmaton=this.clientHeight-this.blokPos.height,this.speedOfAnimation=Math.abs((this.boxFractions[0].offsetTop-this.winZipBlock.offsetTop)/(this.yEndOfAinmaton-this.yStartOfAinmaton)),this.animationBlockLocation=this.animationBlock.offsetTop+this.clientHeight,this.scrollBoxBlockLocation=this.scrollBox.offsetTop+this.clientHeight}init(e){"undefined"==typeof event?(console.log("first block (call handler no event)"),e.menedger(e),e.addScrollHandler(e,e.menedger)):"scroll"===event.type||"onscroll"===event.type?(console.log("second block (call only method)"),e.menedger(e)):(console.log("third block (call scroll handler in another events )"),e.menedger(e),e.addScrollHandler(e,e.menedger))}menedger(e){let t=document.getElementById("direction"),n=.8*document.getElementById("gallery").getBoundingClientRect().y+800;t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+2*n+", "+n/2+", 0, 1)";let i={scrollingElement:document.getElementById("header"),scrollBox:e.animationBlock,runner:document.getElementById("top_box"),clientHeight:e.clientHeight,startPosition:-190,screenStart:.5,screenFinish:.2,run:e.drawBottomAnimation(e,parseInt(document.getElementById("top_box").style.top,10))};i.runner.style.top=e.runScrollAnimation(i);let o={scrollingElement:document.getElementById("header"),scrollBox:e.scrollBox,runner:document.getElementById("scroll_runner"),clientHeight:e.clientHeight,startPosition:0,screenStart:.3,screenFinish:.3,run:function(){}};o.runner.style.top=e.runScrollAnimation(o)}runScrollAnimation(e){let t,n=e.scrollBox,i=e.runner,o=e.clientHeight,l=e.startPosition,s=e.screenStart,r=e.screenFinish,a=-n.getBoundingClientRect().y,c=n.getBoundingClientRect().height,m=parseInt(i.style.top,10);isNaN(m)&&(m=0);let d=i.offsetHeight,h=o*(1-s-r)*(m/(c-d));return m=a+o*s,t=m+h,t<l&&(t=l),t>c-d&&(t=c-d),t+"px"}drawBottomAnimation(e,t){t>=e.animationBlock.offsetHeight-e.boxFractions[0].height?(e.winZipBlock.setAttribute("fell","true"),e.top_img.src="../assets/images/reggie_thumbs_up.png"):(e.winZipBlock.setAttribute("fell","false"),e.top_img.src="../assets/images/wz_top.png");let n=e.winZipBlock.getAttribute("fell");e.bottomBox.setAttribute("fell","true"===n?"true":"false")}animate(e,t,n){let i=performance.now();requestAnimationFrame((function o(l){let s=(l-i)/n;s>1&&(s=1),t(e,s),s<1&&requestAnimationFrame(o)}))}addScrollHandler(e,t){!function(t){e.addHandler(window,"scroll",t)}((function(){return t(e)}))}addWheelHandler(e,t){!function(t){e.addHandler(window,"mousewheel",t)}((function(){return t(e)}))}addHandler(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent?e.attachEvent("on"+t,n):alert("Add handler is not supported")}wheel(e){var t;return(e=e||window.event).wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3),t}}class ButtonAnimate{init(e){for(let t=0;t<e.length;t++)console.log(e[t]),this.animate((function(n){e[t].style.opacity=1*n}),2e3)}animate(e,t){let n=performance.now();requestAnimationFrame((function i(o){let l=(o-n)/t;l>1&&(l=1),e(l),l<1&&requestAnimationFrame(i)}))}}